!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=10)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7);function o(e){return function(e){let t=0;return e.reduce((e,r)=>(e.vertices.push(...r.vertices),e.indices.push(...r.indices.map(e=>e+t)),t+=r.vertices.length,e),{vertices:[],indices:[]})}([{uAxis:new n.Coord3({x:0,y:1,z:0}),vAxis:new n.Coord3({x:0,y:0,z:1}),normal:new n.Coord3({x:1,y:0,z:0})},{uAxis:new n.Coord3({x:0,y:-1,z:0}),vAxis:new n.Coord3({x:0,y:0,z:1}),normal:new n.Coord3({x:-1,y:0,z:0})},{uAxis:new n.Coord3({x:-1,y:0,z:0}),vAxis:new n.Coord3({x:0,y:0,z:1}),normal:new n.Coord3({x:0,y:1,z:0})},{uAxis:new n.Coord3({x:1,y:0,z:0}),vAxis:new n.Coord3({x:0,y:0,z:1}),normal:new n.Coord3({x:0,y:-1,z:0})},{uAxis:new n.Coord3({x:1,y:0,z:0}),vAxis:new n.Coord3({x:0,y:1,z:0}),normal:new n.Coord3({x:0,y:0,z:1})},{uAxis:new n.Coord3({x:1,y:0,z:0}),vAxis:new n.Coord3({x:0,y:-1,z:0}),normal:new n.Coord3({x:0,y:0,z:-1})}].map(({uAxis:t,vAxis:r,normal:o})=>(function(t,r,o){const i=[],a=[];for(let a=0;a<=e;++a){const u=a/e;for(let a=0;a<=e;++a){const s=a/e,c=n.Coord3.add(n.Coord3.add(t.scaled(2*s-1),r.scaled(2*u-1)),o);i.push({position:c,normal:o,texCoord:c.normalized()})}}for(let t=0;t<e;++t)for(let r=0;r<e;++r){const n=r+t*(e+1);a.push(n,n+1,n+(e+1)),a.push(n+1,n+1+(e+1),n+(e+1))}return{vertices:i,indices:a}})(t,r,o)))}function i(e){return[e.x,e.y,e.z]}t.waitMs=function*(e){let t=0;for(;t<e;)t+=(yield);return t},t.range=function*(e,t){for(let r=e;r<t;++r)yield r},t.randomElement=function(e){return e[Math.floor(Math.random()*e.length)]},t.fisherYatesArrayShuffle=function(e){let t=e.length;if(0!==t)for(;--t;){const r=Math.floor(Math.random()*(t+1)),n=e[t],o=e[r];e[t]=o,e[r]=n}},t.makeTesselatedCubeMesh=o,t.makeTesselatedSphereMesh=function(e,t){const r=o(t);return r.vertices=r.vertices.map(t=>{const r=t.position.normalized();return{position:r.scaled(e),normal:r,texCoord:t.texCoord}}),r},t.meshToWebglArrays=function(e){return{position:{numComponents:3,data:e.vertices.map(e=>e.position).map(i).reduce((e,t)=>(e.push(...t),e),[])},normal:{numComponents:3,data:e.vertices.map(e=>e.normal).map(i).reduce((e,t)=>(e.push(...t),e),[])},texCoord:{numComponents:3,data:e.vertices.map(e=>e.texCoord).map(i).reduce((e,t)=>(e.push(...t),e),[])},indices:{numComponents:3,data:e.indices}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8),o=r(0),i=r(4);let a,u;t.canvas=document.getElementsByTagName("canvas")[0],t.gl=t.canvas.getContext("webgl"),t.init=function(){n.resizeCanvasToDisplaySize(t.canvas,window.devicePixelRatio);const e=n.createProgramFromSources(t.gl,["\n\t\t\tuniform mat4 u_worldViewProjection;\n\t\t\tuniform vec3 u_lightWorldPos;\n\t\t\tuniform mat4 u_world;\n\t\t\tuniform mat4 u_model;\n\t\t\tuniform mat4 u_viewInverse;\n\t\t\tuniform mat4 u_worldInverseTranspose;\n\t\t\tuniform vec4 u_position;\n\n\t\t\tattribute vec4 position;\n\t\t\tattribute vec3 normal;\n\t\t\tattribute vec3 texCoord;\n\n\t\t\tvarying vec4 v_position;\n\t\t\tvarying vec3 v_normal;\n\t\t\tvarying vec3 v_texCoord;\n\t\t\tvarying vec3 v_surfaceToLight;\n\t\t\tvarying vec3 v_surfaceToView;\n\n\t\t\tvoid main() {\n\t\t\t\tv_position = u_worldViewProjection * ((u_model * position) + u_position);\n\t\t\t\tv_normal = (u_worldInverseTranspose * u_model * vec4(normal, 0)).xyz;\n\t\t\t\tv_texCoord = texCoord;\n\t\t\t\tv_surfaceToLight = u_lightWorldPos - (u_world * position).xyz;\n\t\t\t\tv_surfaceToView = (u_viewInverse[3] - (u_world * position)).xyz;\n\t\t\t\tgl_Position = v_position;\n\t\t\t}\n\t\t","\n\t\t\tprecision mediump float;\n\n\t\t\tvarying vec4 v_position;\n\t\t\tvarying vec3 v_normal;\n\t\t\tvarying vec3 v_texCoord;\n\t\t\tvarying vec3 v_surfaceToLight;\n\t\t\tvarying vec3 v_surfaceToView;\n\n\t\t\tuniform vec4 u_lightColor;\n\t\t\tuniform vec4 u_ambient;\n\t\t\tuniform vec4 u_specular;\n\t\t\tuniform float u_shininess;\n\t\t\tuniform float u_specularFactor;\n\t\t\tuniform samplerCube u_diffuseMap;\n\n\t\t\tvec4 lit(float l ,float h, float m) {\n\t\t\t\treturn vec4(\n\t\t\t\t\t1.0,\n\t\t\t\t\tmax(l, 0.0),\n\t\t\t\t\t(l > 0.0) ? pow(max(0.0, h), m) : 0.0,\n\t\t\t\t\t1.0\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\tvec4 diffuseColor = textureCube(u_diffuseMap, normalize(v_texCoord));\n\t\t\t\tvec3 a_normal = normalize(v_normal);\n\t\t\t\tvec3 surfaceToLight = normalize(v_surfaceToLight);\n\t\t\t\tvec3 surfaceToView = normalize(v_surfaceToView);\n\t\t\t\tvec3 halfVector = normalize(surfaceToLight + surfaceToView);\n\t\t\t\tvec4 litR = lit(\n\t\t\t\t\tdot(a_normal, surfaceToLight),\n\t\t\t\t\tdot(a_normal, halfVector),\n\t\t\t\t\tu_shininess\n\t\t\t\t);\n\t\t\t\tvec4 outColor = vec4(\n\t\t\t\t\t(u_lightColor * (\n\t\t\t\t\t\tdiffuseColor * litR.y + diffuseColor * u_ambient +\n\t\t\t\t\t\tu_specular * litR.z * u_specularFactor\n\t\t\t\t\t)).rgb,\n\t\t\t\t\tdiffuseColor.a\n\t\t\t\t);\n\t\t\t\tgl_FragColor = outColor;\n\t\t\t}\n\t\t"]);t.gl.enable(t.gl.DEPTH_TEST),t.gl.enable(t.gl.CULL_FACE),u=n.createTextures(t.gl,{earth:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/earth.jpg"},globe:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/globe.jpg"},eye:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/eye.jpg"},oneBall:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/1-ball.jpg"},thirteenBall:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/13-ball.jpg"},volley:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/volley.jpg"},tennis:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/tennis.jpg"},soccer:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/soccer.jpg"},animator:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/animator.jpg"},jupiter:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/jupiter.jpg"},poke:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/poke.png"},balance:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/balance.jpg"},basket:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/basket.jpg"},hidden:{target:t.gl.TEXTURE_CUBE_MAP,src:"graphics/hidden.jpg"}}),a=e&&n.createProgramInfoFromProgram(t.gl,e),t.gl.viewport(0,0,t.gl.canvas.width,t.gl.canvas.height),t.gl.useProgram(a.program),n.setBuffersAndAttributes(t.gl,a,c);const r=t.gl.canvas.clientWidth/t.gl.canvas.clientHeight,o=i.Board.size.x+2,s=i.Board.size.y+2,l=Math.max(o,o*r)/2,d=Math.max(s,s/r)/2,m=n.m4.ortho(-l,l,-d,d,.5,30),p=n.m4.lookAt([1,4,12],[0,0,0],[0,1,0]),y=n.m4.inverse(p),v=n.m4.multiply(m,y),h=n.m4.rotationY(0);n.setUniforms(a,{u_lightWorldPos:[-4,8,10],u_lightColor:[1,.8,.8,1],u_ambient:[.5,.5,.5,1],u_specular:[.5,.5,.5,1],u_shininess:50,u_specularFactor:1,u_viewInverse:p,u_world:h,u_worldInverseTranspose:n.m4.transpose(n.m4.inverse(h)),u_worldViewProjection:n.m4.multiply(v,h)}),f()};const s=o.meshToWebglArrays(o.makeTesselatedSphereMesh(.4,8)),c=n.createBufferInfoFromArrays(t.gl,s);function f(){t.gl.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT)}t.clear=f,t.draw=function(e,r){const o=n.m4.multiply(n.m4.rotationY((new Date).getTime()/1e3),n.m4.rotationX((new Date).getTime()/1341));n.setUniforms(a,{u_model:o,u_diffuseMap:u[Object.keys(u)[e%Object.keys(u).length]],u_position:[r.x,r.y,0,0]}),n.drawBufferInfo(t.gl,c)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),o=r(1),i=r(6);t.Piece=class{constructor(e){this.color=e.color,this.colorIsVisible=!0,this.picked=!1,this.frameCoroutine=this.makeFrameCoroutine()}setPicked(e){this.picked=e}*makeFrameCoroutine(){yield*n.waitMs(2e3),this.colorIsVisible=!1}draw(e){o.draw(this.picked||this.colorIsVisible?this.color:i.Board.numColors,e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.x=e.x,this.y=e.y}scaled(e){return n.scale(this,e)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalized(){return n.scale(this,1/this.length())}static distance(e,t){return n.subtract(e,t).length()}static add(e,t){return new n({x:e.x+t.x,y:e.y+t.y})}static subtract(e,t){return new n({x:e.x-t.x,y:e.y-t.y})}static scale(e,t){return new n({x:e.x*t,y:e.y*t})}}t.Coord2=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3),o=r(2),i=r(0),a=r(1);class u{constructor(e){this.gameMode=e.gameMode,this.frameCoroutine=this.makeFrameCoroutine(),this.pickedPiece=void 0,this.pieces=[],this.queuedPiece=new o.Piece({color:i.randomElement(this.allColors())}),this.queuedPiece.setPicked(!0),a.canvas.addEventListener("click",e=>{const t=a.canvas.clientWidth/a.canvas.clientHeight,r=u.size.x+2,o=u.size.y+2,i=Math.max(r,r*t),s=Math.max(o,o/t),c=(e.offsetX/a.canvas.clientWidth-.5)*i,f=-(e.offsetY/a.canvas.clientHeight-.5)*s,l=Math.floor(c+u.size.x/2),d=Math.floor(f+u.size.y/2);l>=0&&l<u.size.x&&d>=0&&d<u.size.y&&this.pick(u.coordToIndex(new n.Coord2({x:l,y:d})))})}static xyToIndex(e,t){return e+t*u.size.x}static coordToIndex(e){return u.xyToIndex(e.x,e.y)}static indexToCoord(e){return new n.Coord2({x:e%u.size.x,y:Math.floor(e/u.size.x)})}pick(e){const t=this.pieces[e];t&&!this.pickedPiece&&(this.pickedPiece=t,this.pickedPiece.setPicked(!0))}addPiece(e){const t=Array.from(i.range(0,u.size.x*u.size.y)).sort((e,t)=>{const r=new n.Coord2({x:(u.size.x-1)/2,y:(u.size.y-1)/2});return r.x+=.1,r.x+=.2,n.Coord2.distance(u.indexToCoord(e),r)-n.Coord2.distance(u.indexToCoord(t),r)});for(const r of t)if(!this.pieces[r])return this.pieces[r]=new o.Piece({color:e}),!0;return!1}existingColors(){return Array.from(new Set(this.pieces.filter(e=>!!e).map(e=>e.color)))}allColors(){return Array.from(i.range(0,u.numColors))}*makeFrameCoroutine(){const e=this.gameFlowCoroutine();for(;;){const t=yield,r=this.pieces.filter(e=>!!e).map(e=>e.frameCoroutine),n=e.next(t).done;if([this.queuedPiece.frameCoroutine,...r].forEach(e=>e.next(t)),n)return}}*gameFlowCoroutine(){for(yield*i.waitMs(1e3),yield*this.initializationCoroutine();;){if(this.pickedPiece){if(yield*i.waitMs(1e3),this.pickedPiece.color==this.queuedPiece.color){if(this.gameMode.onUnlockedPair(this),this.pieces=this.pieces.map(e=>e!=this.pickedPiece?e:void 0),this.pieces.filter(e=>!!e).length<2)return void this.gameMode.onWin(this)}else{if(!this.addPiece(this.queuedPiece.color))return void this.gameMode.onGameOver(this)}this.queuedPiece=new o.Piece({color:i.randomElement(this.existingColors().filter(e=>e!=this.queuedPiece.color))}),this.queuedPiece.setPicked(!0),this.pickedPiece.setPicked(!1),this.pickedPiece=void 0}yield}}*initializationCoroutine(){for(let e=0;e<u.size.x*u.size.y*.75;++e){const e=i.randomElement(this.allColors());this.addPiece(e),yield*i.waitMs(100)}}draw(){a.clear(),this.queuedPiece.draw(n.Coord2.add(u.size.scaled(.5),new n.Coord2({x:.5,y:.5})));for(let e=0;e<u.size.x*u.size.y;++e){const t=this.pieces[e];t&&t.draw(n.Coord2.add(n.Coord2.add(u.indexToCoord(e),u.size.scaled(-.5)),new n.Coord2({x:.5,y:.5})))}}}u.size=new n.Coord2({x:4,y:4}),u.numColors=13,t.Board=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4);t.GameMode1p=class{constructor(){this.board=new n.Board({gameMode:this}),this.frameCoroutine=this.makeFrameCoroutine()}onUnlockedPair(e){}onGameOver(e){alert("game over")}onWin(e){alert("you won")}*makeFrameCoroutine(){for(;;){const e=yield;if(this.board.frameCoroutine.next(e).done)return}}draw(){this.board.draw()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3),o=r(2),i=r(0),a=r(1);class u{constructor(e){this.gameMode=e.gameMode,this.frameCoroutine=this.makeFrameCoroutine(),this.pickedPiece=void 0,this.pieces=[],this.queuedPiece=new o.Piece({color:i.randomElement(this.allColors())}),this.queuedPiece.setPicked(!0),a.canvas.addEventListener("click",e=>{const t=a.canvas.clientWidth/a.canvas.clientHeight,r=u.size.x+2,o=u.size.y+2,i=Math.max(r,r*t),s=Math.max(o,o/t),c=(e.offsetX/a.canvas.clientWidth-.5)*i,f=-(e.offsetY/a.canvas.clientHeight-.5)*s,l=Math.floor(c+u.size.x/2),d=Math.floor(f+u.size.y/2);l>=0&&l<u.size.x&&d>=0&&d<u.size.y&&this.pick(u.coordToIndex(new n.Coord2({x:l,y:d})))})}static xyToIndex(e,t){return e+t*u.size.x}static coordToIndex(e){return u.xyToIndex(e.x,e.y)}static indexToCoord(e){return new n.Coord2({x:e%u.size.x,y:Math.floor(e/u.size.x)})}pick(e){const t=this.pieces[e];t&&!this.pickedPiece&&(this.pickedPiece=t,this.pickedPiece.setPicked(!0))}addPiece(e){const t=Array.from(i.range(0,u.size.x*u.size.y)).sort((e,t)=>{const r=new n.Coord2({x:(u.size.x-1)/2,y:(u.size.y-1)/2});return r.x+=.1,r.x+=.2,n.Coord2.distance(u.indexToCoord(e),r)-n.Coord2.distance(u.indexToCoord(t),r)});for(const r of t)if(!this.pieces[r])return this.pieces[r]=new o.Piece({color:e}),!0;return!1}existingColors(){return Array.from(new Set(this.pieces.filter(e=>!!e).map(e=>e.color)))}allColors(){return Array.from(i.range(0,u.numColors))}*makeFrameCoroutine(){const e=this.gameFlowCoroutine();for(;;){const t=yield,r=this.pieces.filter(e=>!!e).map(e=>e.frameCoroutine),n=e.next(t).done;if([this.queuedPiece.frameCoroutine,...r].forEach(e=>e.next(t)),n)return}}*gameFlowCoroutine(){for(yield*i.waitMs(1e3),yield*this.initializationCoroutine();;){if(this.pickedPiece){if(yield*i.waitMs(1e3),this.pickedPiece.color==this.queuedPiece.color){if(this.gameMode.onUnlockedPair(this),this.pieces=this.pieces.map(e=>e!=this.pickedPiece?e:void 0),this.pieces.filter(e=>!!e).length<2)return void this.gameMode.onWin(this)}else{if(!this.addPiece(this.queuedPiece.color))return void this.gameMode.onGameOver(this)}this.queuedPiece=new o.Piece({color:i.randomElement(this.existingColors().filter(e=>e!=this.queuedPiece.color))}),this.queuedPiece.setPicked(!0),this.pickedPiece.setPicked(!1),this.pickedPiece=void 0}yield}}*initializationCoroutine(){for(let e=0;e<u.size.x*u.size.y*.75;++e){const e=i.randomElement(this.allColors());this.addPiece(e),yield*i.waitMs(100)}}draw(){a.clear(),this.queuedPiece.draw(n.Coord2.add(u.size.scaled(.5),new n.Coord2({x:.5,y:.5})));for(let e=0;e<u.size.x*u.size.y;++e){const t=this.pieces[e];t&&t.draw(n.Coord2.add(n.Coord2.add(u.indexToCoord(e),u.size.scaled(-.5)),new n.Coord2({x:.5,y:.5})))}}}u.size=new n.Coord2({x:4,y:4}),u.numColors=13,t.Board=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.x=e.x,this.y=e.y,this.z=e.z}scaled(e){return n.scale(this,e)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalized(){return n.scale(this,1/this.length())}static distance(e,t){return n.subtract(e,t).length()}static add(e,t){return new n({x:e.x+t.x,y:e.y+t.y,z:e.z+t.z})}static subtract(e,t){return new n({x:e.x-t.x,y:e.y-t.y,z:e.z-t.z})}static scale(e,t){return new n({x:e.x*t,y:e.y*t,z:e.z*t})}}t.Coord3=n},function(e,t,r){
/*!
 * @license twgl.js 4.4.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
var n;"undefined"!=typeof self&&self,n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){"use strict";t.__esModule=!0,t.copyExistingProperties=function(e,t){Object.keys(t).forEach(function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])})},t.copyNamedProperties=function(e,t,r){e.forEach(function(e){var n=t[e];void 0!==n&&(r[e]=n)})},t.isBuffer=function(e,t){a||(a=e.createBuffer());return t instanceof a.constructor},t.isRenderbuffer=function(e,t){u||(u=e.createRenderbuffer());return t instanceof u.constructor},t.isShader=function(e,t){s||(s=e.createShader(e.VERTEX_SHADER));return t instanceof s.constructor},t.isTexture=function(e,t){c||(c=e.createTexture());return t instanceof c.constructor},t.isSampler=function(e,t){if(!f){if(!e.createSampler)return!1;f=e.createSampler()}return t instanceof f.constructor},t.warn=t.error=void 0;var n,o=(n=r(2))&&n.__esModule?n:{default:n};var i=o.default.console&&o.default.console.error&&"function"==typeof o.default.console.error?o.default.console.error.bind(o.default.console):function(){};t.error=i;var a,u,s,c,f,l=o.default.console&&o.default.console.warn&&"function"==typeof o.default.console.warn?o.default.console.warn.bind(o.default.console):function(){};t.warn=l},function(e,t,r){"use strict";t.__esModule=!0,t.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return i;if(e instanceof Uint8Array)return a;if(e instanceof Uint8ClampedArray)return a;if(e instanceof Int16Array)return u;if(e instanceof Uint16Array)return s;if(e instanceof Int32Array)return c;if(e instanceof Uint32Array)return f;if(e instanceof Float32Array)return l;throw"unsupported typed array type"},t.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return i;if(e===Uint8Array)return a;if(e===Uint8ClampedArray)return a;if(e===Int16Array)return u;if(e===Uint16Array)return s;if(e===Int32Array)return c;if(e===Uint32Array)return f;if(e===Float32Array)return l;throw"unsupported typed array type"},t.getTypedArrayTypeForGLType=function(e){var t=d[e];if(!t)throw"unknown gl type";return t},t.isArrayBuffer=void 0;var n,o=(n=r(2))&&n.__esModule?n:{default:n};var i=5120,a=5121,u=5122,s=5123,c=5124,f=5125,l=5126,d={},m=d;m[i]=Int8Array,m[a]=Uint8Array,m[u]=Int16Array,m[s]=Uint16Array,m[c]=Int32Array,m[f]=Uint32Array,m[l]=Float32Array,m[32819]=Uint16Array,m[32820]=Uint16Array,m[33635]=Uint16Array,m[5131]=Uint16Array,m[33640]=Uint32Array,m[35899]=Uint32Array,m[35902]=Uint32Array,m[36269]=Uint32Array,m[34042]=Uint32Array;var p=o.default.SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof o.default.SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};t.isArrayBuffer=p},function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};t.default=n},function(e,t,r){"use strict";t.__esModule=!0,t.add=function(e,t,r){return(r=r||new n(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r},t.copy=function(e,t){return(t=t||new n(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.create=function(e,t,r){var o=new n(3);e&&(o[0]=e);t&&(o[1]=t);r&&(o[2]=r);return o},t.cross=function(e,t,r){r=r||new n(3);var o=e[2]*t[0]-e[0]*t[2],i=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=o,r[2]=i,r},t.distance=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(r*r+n*n+o*o)},t.distanceSq=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o},t.divide=function(e,t,r){return(r=r||new n(3))[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r},t.divScalar=function(e,t,r){return(r=r||new n(3))[0]=e[0]/t,r[1]=e[1]/t,r[2]=e[2]/t,r},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},t.lerp=function(e,t,r,o){return(o=o||new n(3))[0]=(1-r)*e[0]+r*t[0],o[1]=(1-r)*e[1]+r*t[1],o[2]=(1-r)*e[2]+r*t[2],o},t.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},t.lengthSq=function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},t.mulScalar=function(e,t,r){return(r=r||new n(3))[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r},t.multiply=function(e,t,r){return(r=r||new n(3))[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r},t.negate=function(e,t){return(t=t||new n(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},t.normalize=function(e,t){t=t||new n(3);var r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],o=Math.sqrt(r);o>1e-5?(t[0]=e[0]/o,t[1]=e[1]/o,t[2]=e[2]/o):(t[0]=0,t[1]=0,t[2]=0);return t},t.setDefaultType=function(e){var t=n;return n=e,t},t.subtract=function(e,t,r){return(r=r||new n(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r};var n=Float32Array},function(e,t,r){"use strict";t.__esModule=!0,t.isWebGL1=function(e){return!e.texStorage2D},t.isWebGL2=function(e){return!!e.texStorage2D},t.glEnumToString=void 0;var n=function(){var e={},t={};return function(r,n){return function(r){var n=r.constructor.name;if(!e[n]){for(var o in r)if("number"==typeof r[o]){var i=t[r[o]];t[r[o]]=i?"".concat(i," | ").concat(o):o}e[n]=!0}}(r),t[n]||"0x"+n.toString(16)}}();t.glEnumToString=n},function(e,t,r){"use strict";t.__esModule=!0,t.createAttributeSetters=X,t.createProgram=M,t.createProgramFromScripts=function(e,t,r,n,o){for(var i=w(r,n,o),a=[],u=0;u<t.length;++u){var s=B(e,t[u],e[F[u]],i.errorCallback);if(!s)return null;a.push(s)}return M(e,a,i)},t.createProgramFromSources=O,t.createProgramInfo=function(e,t,r,n,o){var i=w(r,n,o),a=!0;if(t=t.map(function(e){if(e.indexOf("\n")<0){var t=f(e);t?e=t.text:(i.errorCallback("no element with id: "+e),a=!1)}return e}),!a)return null;var u=O(e,t,i);if(!u)return null;return V(e,u)},t.createProgramInfoFromProgram=V,t.createUniformSetters=S,t.createUniformBlockSpecFromProgram=D,t.createUniformBlockInfoFromProgram=N,t.createUniformBlockInfo=function(e,t,r){return N(e,t.program,t.uniformBlockSpec,r)},t.createTransformFeedback=function(e,t,r){var n=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n),e.useProgram(t.program),k(e,t,r),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),function(e,t,r){for(var n in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var o=t[n];o&&e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,null)}}(e,t,r),n},t.createTransformFeedbackInfo=z,t.bindTransformFeedbackInfo=k,t.setAttributes=G,t.setBuffersAndAttributes=function(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(G(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices))},t.setUniforms=function e(t,r){var n=t.uniformSetters||t;var o=arguments.length;for(var i=1;i<o;++i){var a=arguments[i];if(Array.isArray(a))for(var u=a.length,s=0;s<u;++s)e(n,a[s]);else for(var c in a){var f=n[c];f&&f(a[c])}}},t.setUniformBlock=function(e,t,r){j(e,t,r)&&e.bufferData(e.UNIFORM_BUFFER,r.array,e.DYNAMIC_DRAW)},t.setBlockUniforms=function(e,t){var r=e.uniforms;for(var n in t){var o=r[n];if(o){var i=t[n];i.length?o.set(i):o[0]=i}}},t.bindUniformBlock=j;var n,o=u(r(4)),i=u(r(0)),a=(n=r(2))&&n.__esModule?n:{default:n};function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var s=i.error,c=i.warn,f=a.default&&a.default.document&&a.default.document.getElementById?a.default.document.getElementById.bind(a.default.document):function(){return null},l={};function d(e,t){return l[t].bindPoint}function m(e,t){return function(r){e.uniform1i(t,r)}}function p(e,t){return function(r){e.uniform1iv(t,r)}}function y(e,t){return function(r){e.uniform2iv(t,r)}}function v(e,t){return function(r){e.uniform3iv(t,r)}}function h(e,t){return function(r){e.uniform4iv(t,r)}}function b(e,t,r,n){var a=d(0,t);return o.isWebGL2(e)?function(t){var o,u;i.isTexture(e,t)?(o=t,u=null):(o=t.texture,u=t.sampler),e.uniform1i(n,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,o),e.bindSampler(r,u)}:function(t){e.uniform1i(n,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(a,t)}}function E(e,t,r,n,a){for(var u=d(0,t),s=new Int32Array(a),c=0;c<a;++c)s[c]=r+c;return o.isWebGL2(e)?function(t){e.uniform1iv(n,s),t.forEach(function(t,n){var o,a;e.activeTexture(e.TEXTURE0+s[n]),i.isTexture(e,t)?(o=t,a=null):(o=t.texture,a=t.sampler),e.bindSampler(r,a),e.bindTexture(u,o)})}:function(t){e.uniform1iv(n,s),t.forEach(function(t,r){e.activeTexture(e.TEXTURE0+s[r]),e.bindTexture(u,t)})}}function _(e,t){return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||e.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function g(e,t){return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function x(e,t,r){var n=r.size,o=r.count;return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(var i=r.size||r.numComponents||n,a=i/o,u=r.type||e.FLOAT,s=l[u].size*i,c=r.normalize||!1,f=r.offset||0,d=s/o,m=0;m<o;++m)e.enableVertexAttribArray(t+m),e.vertexAttribPointer(t+m,a,u,c,s,f+d*m),void 0!==r.divisor&&e.vertexAttribDivisor(t+m,r.divisor)}}l[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},l[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}}},l[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}}},l[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}}},l[5124]={Type:Int32Array,size:4,setter:m,arraySetter:p},l[35667]={Type:Int32Array,size:8,setter:y},l[35668]={Type:Int32Array,size:12,setter:v},l[35669]={Type:Int32Array,size:16,setter:h},l[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},l[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}}},l[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}}},l[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}}},l[35670]={Type:Uint32Array,size:4,setter:m,arraySetter:p},l[35671]={Type:Uint32Array,size:8,setter:y},l[35672]={Type:Uint32Array,size:12,setter:v},l[35673]={Type:Uint32Array,size:16,setter:h},l[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}},l[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}},l[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}},l[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}},l[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}},l[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}},l[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}},l[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}},l[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}},l[35678]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:3553},l[35680]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:34067},l[35679]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:32879},l[35682]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:3553},l[36289]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:35866},l[36292]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:35866},l[36293]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:34067},l[36298]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:3553},l[36299]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:32879},l[36300]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:34067},l[36303]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:35866},l[36306]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:3553},l[36307]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:32879},l[36308]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:34067},l[36311]={Type:null,size:0,setter:b,arraySetter:E,bindPoint:35866};var T={};T[5126]={size:4,setter:_},T[35664]={size:8,setter:_},T[35665]={size:12,setter:_},T[35666]={size:16,setter:_},T[5124]={size:4,setter:g},T[35667]={size:8,setter:g},T[35668]={size:12,setter:g},T[35669]={size:16,setter:g},T[5125]={size:4,setter:g},T[36294]={size:8,setter:g},T[36295]={size:12,setter:g},T[36296]={size:16,setter:g},T[35670]={size:4,setter:g},T[35671]={size:8,setter:g},T[35672]={size:12,setter:g},T[35673]={size:16,setter:g},T[35674]={size:4,setter:x,count:2},T[35675]={size:9,setter:x,count:3},T[35676]={size:16,setter:x,count:4};var A=void 0;var P=/^[ \t]*\n/;function R(e,t,r,n){var o=n||s,i=e.createShader(r),a=0;if(P.test(t)&&(a=1,t=t.replace(P,"")),e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var u=e.getShaderInfoLog(i);return o(function(e,t){return t=t||0,++t,e.split("\n").map(function(e,r){return r+t+": "+e}).join("\n")}(t,a)+"\n*** Error compiling shader: "+u),e.deleteShader(i),null}return i}function w(e,t,r){var n;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var o=e;r=o.errorCallback,e=o.attribLocations,n=o.transformFeedbackVaryings}var i={errorCallback:r||s,transformFeedbackVaryings:n};if(e){var a={};Array.isArray(e)?e.forEach(function(e,r){a[e]=t?t[r]:r}):a=e,i.attribLocations=a}return i}var F=["VERTEX_SHADER","FRAGMENT_SHADER"];function C(e){return e.indexOf("frag")>=0?A.FRAGMENT_SHADER:e.indexOf("vert")>=0?A.VERTEX_SHADER:void 0}function U(e,t){t.forEach(function(t){e.deleteShader(t)})}function M(e,t,r,n,o){for(var a=w(r,n,o),u=[],s=[],c=0;c<t.length;++c){var l=t[c];if("string"==typeof l){var d=f(l),m=d?d.text:l,p=e[F[c]];d&&d.type&&(p=C(d.type)||p),l=R(e,m,p,a.errorCallback),s.push(l)}i.isShader(e,l)&&u.push(l)}if(u.length!==t.length)return a.errorCallback("not enough shaders for program"),U(e,s),null;var y=e.createProgram();u.forEach(function(t){e.attachShader(y,t)}),a.attribLocations&&Object.keys(a.attribLocations).forEach(function(t){e.bindAttribLocation(y,a.attribLocations[t],t)});var v=a.transformFeedbackVaryings;if(v&&(v.attribs&&(v=v.attribs),Array.isArray(v)||(v=Object.keys(v)),e.transformFeedbackVaryings(y,v,a.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(y),!e.getProgramParameter(y,e.LINK_STATUS)){var h=e.getProgramInfoLog(y);return a.errorCallback("Error in program linking:"+h),e.deleteProgram(y),U(e,s),null}return y}function B(e,t,r,n){var o,i=f(t);if(!i)throw"*** Error: unknown script element"+t;o=i.text;var a=r||C(i.type);if(!a)throw"*** Error: unknown shader type";return R(e,o,a,n)}function O(e,t,r,n,o){for(var i=w(r,n,o),a=[],u=0;u<t.length;++u){var s=R(e,t[u],e[F[u]],i.errorCallback);if(!s)return null;a.push(s)}return M(e,a,i)}function I(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function S(e,t){var r=0;function n(t,n){var o,i=e.getUniformLocation(t,n.name),a=n.size>1&&"[0]"===n.name.substr(-3),u=n.type,s=l[u];if(!s)throw"unknown type: 0x"+u.toString(16);if(s.bindPoint){var c=r;r+=n.size,o=a?s.arraySetter(e,u,c,i,n.size):s.setter(e,u,c,i,n.size)}else o=s.arraySetter&&a?s.arraySetter(e,i):s.setter(e,i);return o.location=i,o}for(var o={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<i;++a){var u=e.getActiveUniform(t,a);if(!I(u)){var s=u.name;"[0]"===s.substr(-3)&&(s=s.substr(0,s.length-3));var c=n(t,u);o[s]=c}}return o}function z(e,t){for(var r={},n=e.getProgramParameter(t,e.TRANSFORM_FEEDBACK_VARYINGS),o=0;o<n;++o){var i=e.getTransformFeedbackVarying(t,o);r[i.name]={index:o,type:i.type,size:i.size}}return r}function k(e,t,r){for(var n in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var o=t[n];if(o){var i=r[n];i.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,o.index,i.buffer,i.offset,i.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,i.buffer)}}}function D(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=[],o=[],i=0;i<r;++i){o.push(i),n.push({});var a=e.getActiveUniform(t,i);if(I(a))break;n[i].name=a.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){var i=r[0],a=r[1];e.getActiveUniforms(t,o,e[i]).forEach(function(e,t){n[t][a]=e})});for(var u={},s=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS),c=0;c<s;++c){var f=e.getActiveUniformBlockName(t,c),l={index:c,usedByVertexShader:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,c,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};l.used=l.usedByVertexSahder||l.usedByFragmentShader,u[f]=l}return{blockSpecs:u,uniformData:n}}var L=/\[\d+\]\.$/;function N(e,t,r,n){var o=r.blockSpecs,i=r.uniformData,a=o[n];if(!a)return c("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(a.size),s=e.createBuffer(),f=a.index;e.bindBuffer(e.UNIFORM_BUFFER,s),e.uniformBlockBinding(t,a.index,f);var d=n+".";L.test(d)&&(d=d.replace(L,"."));var m={};return a.uniformIndices.forEach(function(e){var t=i[e],r=l[t.type],n=r.Type,o=t.size*r.size,a=t.name;a.substr(0,d.length)===d&&(a=a.substr(d.length)),m[a]=new n(u,t.offset,o/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:s,uniforms:m}}function j(e,t,r){var n=(t.uniformBlockSpec||t).blockSpecs[r.name];if(n){var o=n.index;return e.bindBufferRange(e.UNIFORM_BUFFER,o,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function X(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<n;++o){var i=e.getActiveAttrib(t,o);if(!I(i)){var a=e.getAttribLocation(t,i.name),u=T[i.type],s=u.setter(e,a,u);s.location=a,r[i.name]=s}}return r}function G(e,t){for(var r in t){var n=e[r];n&&n(t[r])}}function V(e,t){var r={program:t,uniformSetters:S(e,t),attribSetters:X(e,t)};return o.isWebGL2(e)&&(r.uniformBlockSpec=D(e,t),r.transformFeedbackInfo=z(e,t)),r}},function(e,t,r){"use strict";t.__esModule=!0,t.axisRotate=function(e,t,r,n){n=n||new o(16);var i=t[0],a=t[1],u=t[2],s=Math.sqrt(i*i+a*a+u*u),c=(i/=s)*i,f=(a/=s)*a,l=(u/=s)*u,d=Math.cos(r),m=Math.sin(r),p=1-d,y=c+(1-c)*d,v=i*a*p+u*m,h=i*u*p-a*m,b=i*a*p-u*m,E=f+(1-f)*d,_=a*u*p+i*m,g=i*u*p+a*m,x=a*u*p-i*m,T=l+(1-l)*d,A=e[0],P=e[1],R=e[2],w=e[3],F=e[4],C=e[5],U=e[6],M=e[7],B=e[8],O=e[9],I=e[10],S=e[11];n[0]=y*A+v*F+h*B,n[1]=y*P+v*C+h*O,n[2]=y*R+v*U+h*I,n[3]=y*w+v*M+h*S,n[4]=b*A+E*F+_*B,n[5]=b*P+E*C+_*O,n[6]=b*R+E*U+_*I,n[7]=b*w+E*M+_*S,n[8]=g*A+x*F+T*B,n[9]=g*P+x*C+T*O,n[10]=g*R+x*U+T*I,n[11]=g*w+x*M+T*S,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);return n},t.axisRotation=function(e,t,r){r=r||new o(16);var n=e[0],i=e[1],a=e[2],u=Math.sqrt(n*n+i*i+a*a),s=(n/=u)*n,c=(i/=u)*i,f=(a/=u)*a,l=Math.cos(t),d=Math.sin(t),m=1-l;return r[0]=s+(1-s)*l,r[1]=n*i*m+a*d,r[2]=n*a*m-i*d,r[3]=0,r[4]=n*i*m-a*d,r[5]=c+(1-c)*l,r[6]=i*a*m+n*d,r[7]=0,r[8]=n*a*m+i*d,r[9]=i*a*m-n*d,r[10]=f+(1-f)*l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},t.copy=s,t.frustum=function(e,t,r,n,i,a,u){u=u||new o(16);var s=t-e,c=n-r,f=i-a;return u[0]=2*i/s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*i/c,u[6]=0,u[7]=0,u[8]=(e+t)/s,u[9]=(n+r)/c,u[10]=a/f,u[11]=-1,u[12]=0,u[13]=0,u[14]=i*a/f,u[15]=0,u},t.getAxis=function(e,t,r){r=r||n.create();var o=4*t;return r[0]=e[o+0],r[1]=e[o+1],r[2]=e[o+2],r},t.getTranslation=function(e,t){return(t=t||n.create())[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.identity=c,t.inverse=f,t.lookAt=function(e,t,r,s){s=s||new o(16);var c=i,f=a,l=u;return n.normalize(n.subtract(e,t,l),l),n.normalize(n.cross(r,l,c),c),n.normalize(n.cross(l,c,f),f),s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=0,s[4]=f[0],s[5]=f[1],s[6]=f[2],s[7]=0,s[8]=l[0],s[9]=l[1],s[10]=l[2],s[11]=0,s[12]=e[0],s[13]=e[1],s[14]=e[2],s[15]=1,s},t.multiply=function(e,t,r){r=r||new o(16);var n=e[0],i=e[1],a=e[2],u=e[3],s=e[4],c=e[5],f=e[6],l=e[7],d=e[8],m=e[9],p=e[10],y=e[11],v=e[12],h=e[13],b=e[14],E=e[15],_=t[0],g=t[1],x=t[2],T=t[3],A=t[4],P=t[5],R=t[6],w=t[7],F=t[8],C=t[9],U=t[10],M=t[11],B=t[12],O=t[13],I=t[14],S=t[15];return r[0]=n*_+s*g+d*x+v*T,r[1]=i*_+c*g+m*x+h*T,r[2]=a*_+f*g+p*x+b*T,r[3]=u*_+l*g+y*x+E*T,r[4]=n*A+s*P+d*R+v*w,r[5]=i*A+c*P+m*R+h*w,r[6]=a*A+f*P+p*R+b*w,r[7]=u*A+l*P+y*R+E*w,r[8]=n*F+s*C+d*U+v*M,r[9]=i*F+c*C+m*U+h*M,r[10]=a*F+f*C+p*U+b*M,r[11]=u*F+l*C+y*U+E*M,r[12]=n*B+s*O+d*I+v*S,r[13]=i*B+c*O+m*I+h*S,r[14]=a*B+f*O+p*I+b*S,r[15]=u*B+l*O+y*I+E*S,r},t.negate=function(e,t){return(t=t||new o(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},t.ortho=function(e,t,r,n,i,a,u){return(u=u||new o(16))[0]=2/(t-e),u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2/(n-r),u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2/(i-a),u[11]=0,u[12]=(t+e)/(e-t),u[13]=(n+r)/(r-n),u[14]=(a+i)/(i-a),u[15]=1,u},t.perspective=function(e,t,r,n,i){i=i||new o(16);var a=Math.tan(.5*Math.PI-.5*e),u=1/(r-n);return i[0]=a/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(r+n)*u,i[11]=-1,i[12]=0,i[13]=0,i[14]=r*n*u*2,i[15]=0,i},t.rotateX=function(e,t,r){r=r||new o(16);var n=e[4],i=e[5],a=e[6],u=e[7],s=e[8],c=e[9],f=e[10],l=e[11],d=Math.cos(t),m=Math.sin(t);r[4]=d*n+m*s,r[5]=d*i+m*c,r[6]=d*a+m*f,r[7]=d*u+m*l,r[8]=d*s-m*n,r[9]=d*c-m*i,r[10]=d*f-m*a,r[11]=d*l-m*u,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]);return r},t.rotateY=function(e,t,r){r=r||new o(16);var n=e[0],i=e[1],a=e[2],u=e[3],s=e[8],c=e[9],f=e[10],l=e[11],d=Math.cos(t),m=Math.sin(t);r[0]=d*n-m*s,r[1]=d*i-m*c,r[2]=d*a-m*f,r[3]=d*u-m*l,r[8]=d*s+m*n,r[9]=d*c+m*i,r[10]=d*f+m*a,r[11]=d*l+m*u,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]);return r},t.rotateZ=function(e,t,r){r=r||new o(16);var n=e[0],i=e[1],a=e[2],u=e[3],s=e[4],c=e[5],f=e[6],l=e[7],d=Math.cos(t),m=Math.sin(t);r[0]=d*n+m*s,r[1]=d*i+m*c,r[2]=d*a+m*f,r[3]=d*u+m*l,r[4]=d*s-m*n,r[5]=d*c-m*i,r[6]=d*f-m*a,r[7]=d*l-m*u,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]);return r},t.rotationX=function(e,t){t=t||new o(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationY=function(e,t){t=t||new o(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationZ=function(e,t){t=t||new o(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.scale=function(e,t,r){r=r||new o(16);var n=t[0],i=t[1],a=t[2];r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=n*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=i*e[6],r[7]=i*e[7],r[8]=a*e[8],r[9]=a*e[9],r[10]=a*e[10],r[11]=a*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]);return r},t.scaling=function(e,t){return(t=t||new o(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.setAxis=function(e,t,r,n){n!==e&&(n=s(e,n));var o=4*r;return n[o+0]=t[0],n[o+1]=t[1],n[o+2]=t[2],n},t.setDefaultType=function(e){var t=o;return o=e,t},t.setTranslation=function(e,t,r){r=r||c(),e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11]);return r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},t.transformDirection=function(e,t,r){r=r||n.create();var o=t[0],i=t[1],a=t[2];return r[0]=o*e[0]+i*e[4]+a*e[8],r[1]=o*e[1]+i*e[5]+a*e[9],r[2]=o*e[2]+i*e[6]+a*e[10],r},t.transformNormal=function(e,t,r){r=r||n.create();var o=f(e),i=t[0],a=t[1],u=t[2];return r[0]=i*o[0]+a*o[1]+u*o[2],r[1]=i*o[4]+a*o[5]+u*o[6],r[2]=i*o[8]+a*o[9]+u*o[10],r},t.transformPoint=function(e,t,r){r=r||n.create();var o=t[0],i=t[1],a=t[2],u=o*e[3]+i*e[7]+a*e[11]+e[15];return r[0]=(o*e[0]+i*e[4]+a*e[8]+e[12])/u,r[1]=(o*e[1]+i*e[5]+a*e[9]+e[13])/u,r[2]=(o*e[2]+i*e[6]+a*e[10]+e[14])/u,r},t.translate=function(e,t,r){r=r||new o(16);var n=t[0],i=t[1],a=t[2],u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],d=e[5],m=e[6],p=e[7],y=e[8],v=e[9],h=e[10],b=e[11],E=e[12],_=e[13],g=e[14],x=e[15];e!==r&&(r[0]=u,r[1]=s,r[2]=c,r[3]=f,r[4]=l,r[5]=d,r[6]=m,r[7]=p,r[8]=y,r[9]=v,r[10]=h,r[11]=b);return r[12]=u*n+l*i+y*a+E,r[13]=s*n+d*i+v*a+_,r[14]=c*n+m*i+h*a+g,r[15]=f*n+p*i+b*a+x,r},t.translation=function(e,t){return(t=t||new o(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},t.transpose=function(e,t){if((t=t||new o(16))===e){var r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,t}var n=e[0],i=e[1],a=e[2],u=e[3],s=e[4],c=e[5],f=e[6],l=e[7],d=e[8],m=e[9],p=e[10],y=e[11],v=e[12],h=e[13],b=e[14],E=e[15];return t[0]=n,t[1]=s,t[2]=d,t[3]=v,t[4]=i,t[5]=c,t[6]=m,t[7]=h,t[8]=a,t[9]=f,t[10]=p,t[11]=b,t[12]=u,t[13]=l,t[14]=y,t[15]=E,t};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(3));var o=Float32Array,i=n.create(),a=n.create(),u=n.create();function s(e,t){return(t=t||new o(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(e){return(e=e||new o(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function f(e,t){t=t||new o(16);var r=e[0],n=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],d=e[9],m=e[10],p=e[11],y=e[12],v=e[13],h=e[14],b=e[15],E=m*b,_=h*p,g=c*b,x=h*f,T=c*p,A=m*f,P=i*b,R=h*a,w=i*p,F=m*a,C=i*f,U=c*a,M=l*v,B=y*d,O=u*v,I=y*s,S=u*d,z=l*s,k=r*v,D=y*n,L=r*d,N=l*n,j=r*s,X=u*n,G=E*s+x*d+T*v-(_*s+g*d+A*v),V=_*n+P*d+F*v-(E*n+R*d+w*v),W=g*n+R*s+C*v-(x*n+P*s+U*v),Y=A*n+w*s+U*d-(T*n+F*s+C*d),K=1/(r*G+u*V+l*W+y*Y);return t[0]=K*G,t[1]=K*V,t[2]=K*W,t[3]=K*Y,t[4]=K*(_*u+g*l+A*y-(E*u+x*l+T*y)),t[5]=K*(E*r+R*l+w*y-(_*r+P*l+F*y)),t[6]=K*(x*r+P*u+U*y-(g*r+R*u+C*y)),t[7]=K*(T*r+F*u+C*l-(A*r+w*u+U*l)),t[8]=K*(M*f+I*p+S*b-(B*f+O*p+z*b)),t[9]=K*(B*a+k*p+N*b-(M*a+D*p+L*b)),t[10]=K*(O*a+D*f+j*b-(I*a+k*f+X*b)),t[11]=K*(z*a+L*f+X*p-(S*a+N*f+j*p)),t[12]=K*(O*m+z*h+B*c-(S*h+M*c+I*m)),t[13]=K*(L*h+M*i+D*m-(k*m+N*h+B*i)),t[14]=K*(k*c+X*h+I*i-(j*h+O*i+D*c)),t[15]=K*(j*m+S*i+N*c-(L*c+X*m+z*i)),t}},function(e,t,r){"use strict";t.__esModule=!0,t.createAttribsFromArrays=v,t.createBuffersFromArrays=function(e,t){var r={};Object.keys(t).forEach(function(n){r[n]=b(e,t[n],n)}),t.indices?(r.numElements=t.indices.length,r.elementType=n.getGLTypeForTypedArray(y(t.indices),"indices")):r.numElements=function(e){for(var t,r=0;r<h.length&&!((t=h[r])in e);++r);ii===h.length&&(t=Object.keys(e)[0]);var n=e[t],o=f(n).length,i=p(n,t),a=o/i;if(o%i>0)throw"numComponents "+i+" not correct for length "+o;return a}(t);return r},t.createBufferFromArray=b,t.createBufferFromTypedArray=s,t.createBufferInfoFromArrays=function(e,t){var r={attribs:v(e,t)},o=t.indices;if(o){var i=y(o,"indices");r.indices=s(e,i,e.ELEMENT_ARRAY_BUFFER),r.numElements=i.length,r.elementType=n.getGLTypeForTypedArray(i)}else r.numElements=function(e,t){var r,n;for(n=0;n<h.length&&!((r=h[n])in t)&&!((r=a.attribPrefix+r)in t);++n);n===h.length&&(r=Object.keys(t)[0]);var o=t[r];e.bindBuffer(e.ARRAY_BUFFER,o.buffer);var i=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var u=function(e,t){return t===e.BYTE?1:t===e.UNSIGNED_BYTE?1:t===e.SHORT?2:t===e.UNSIGNED_SHORT?2:t===e.INT?4:t===e.UNSIGNED_INT?4:t===e.FLOAT?4:0}(e,o.type),s=i/u,c=o.numComponents||o.size,f=s/c;if(f%1!=0)throw"numComponents "+c+" not correct for length "+length;return f}(e,r.attribs);return r},t.setAttribInfoBufferFromArray=function(e,t,r,n){r=y(r),void 0!==n?(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,r)):u(e,e.ARRAY_BUFFER,t.buffer,r,t.drawType)},t.setAttributePrefix=function(e){a.attribPrefix=e},t.setAttributeDefaults_=function(e){o.copyExistingProperties(e,a)},t.getNumComponents_=p,t.getArray_=f;var n=i(r(1)),o=i(r(0));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var a={attribPrefix:""};function u(e,t,r,n,o){e.bindBuffer(t,r),e.bufferData(t,n,o||e.STATIC_DRAW)}function s(e,t,r,n){if(o.isBuffer(e,t))return t;r=r||e.ARRAY_BUFFER;var i=e.createBuffer();return u(e,r,i,t,n),i}function c(e){return"indices"===e}function f(e){return e.length?e:e.data}var l=/coord|texture/i,d=/color|colour/i;function m(e,t){var r;if(t%(r=l.test(e)?2:d.test(e)?4:3)>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+r+" but "+t+" values is not evenly divisible by "+r+". You should specify it.";return r}function p(e,t){return e.numComponents||e.size||m(t,f(e).length)}function y(e,t){if(n.isArrayBuffer(e))return e;if(n.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var r=e.type;return r||(r=c(t)?Uint16Array:Float32Array),new r(e.data)}function v(e,t){var r={};return Object.keys(t).forEach(function(o){if(!c(o)){var i,u,f,l,d,v=t[o],h=v.attrib||v.name||v.attribName||a.attribPrefix+o;if("number"==typeof v||"number"==typeof v.data){d=v.data||v;var b=v.type||Float32Array,E=d*b.BYTES_PER_ELEMENT;u=n.getGLTypeForTypedArrayType(b),f=void 0!==v.normalize?v.normalize:(g=b)===Int8Array||g===Uint8Array,l=v.numComponents||v.size||m(o,d),i=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,E,v.drawType||e.STATIC_DRAW)}else{var _=y(v,o);i=s(e,_,void 0,v.drawType),u=n.getGLTypeForTypedArray(_),f=void 0!==v.normalize?v.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(_),l=p(v,o),d=_.length}r[h]={buffer:i,numComponents:l,type:u,normalize:f,stride:v.stride||0,offset:v.offset||0,divisor:void 0===v.divisor?void 0:v.divisor,drawType:v.drawType}}var g}),e.bindBuffer(e.ARRAY_BUFFER,null),r}var h=["position","positions","a_position"];function b(e,t,r){var n="indices"===r?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return s(e,y(t,r),n)}},function(e,t,r){"use strict";t.__esModule=!0,t.setTextureDefaults_=function(e){a.copyExistingProperties(e,c),e.textureColor&&T(e.textureColor)},t.createSampler=B,t.createSamplers=function(e,t){var r={};return Object.keys(t).forEach(function(n){r[n]=B(e,t[n])}),r},t.setSamplerParameters=M,t.createTexture=K,t.setEmptyTexture=Y,t.setTextureFromArray=W,t.loadTextureFromUrl=X,t.setTextureFromElement=k,t.setTextureFilteringForSize=O,t.setTextureParameters=U,t.setDefaultTextureColor=T,t.createTextures=function(e,t,r){r=r||D;var n=0,o=[],i={},a={};function u(){0===n&&setTimeout(function(){r(o.length?o:void 0,i,a)},0)}return Object.keys(t).forEach(function(r){var s,c,f=t[r];("string"==typeof(c=f.src)||Array.isArray(c)&&"string"==typeof c[0])&&(s=function(e,t,i){a[r]=i,--n,e&&o.push(e),u()},++n),i[r]=K(e,f,s)}),u(),i},t.resizeTexture=function(e,t,r,n,o){n=n||r.width,o=o||r.height;var i=r.target||e.TEXTURE_2D;e.bindTexture(i,t);var a,u=r.level||0,s=r.internalFormat||r.format||e.RGBA,c=E(s),l=r.format||c.format,d=r.src;a=d&&(f(d)||Array.isArray(d)&&"number"==typeof d[0])?r.type||g(e,d,c.type):r.type||c.type;if(i===e.TEXTURE_CUBE_MAP)for(var m=0;m<6;++m)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,u,s,n,o,0,l,a,null);else e.texImage2D(i,u,s,n,o,0,l,a,null)},t.getNumComponentsForFormat=function(e){var t=p[e];if(!t)throw"unknown format: "+e;return t.numColorComponents},t.getBytesPerElementForInternalFormat=b;var n,o=s(r(4)),i=s(r(1)),a=s(r(0)),u=(n=r(2))&&n.__esModule?n:{default:n};function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var c={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},f=i.isArrayBuffer,l=u.default.document&&u.default.document.createElement?u.default.document.createElement("canvas").getContext("2d"):null,d=6407,m=33319,p={},y=p;y[6406]={numColorComponents:1},y[6409]={numColorComponents:1},y[6410]={numColorComponents:2},y[d]={numColorComponents:3},y[6408]={numColorComponents:4},y[6403]={numColorComponents:1},y[36244]={numColorComponents:1},y[m]={numColorComponents:2},y[33320]={numColorComponents:2},y[d]={numColorComponents:3},y[36248]={numColorComponents:3},y[6408]={numColorComponents:4},y[36249]={numColorComponents:4},y[6402]={numColorComponents:1},y[34041]={numColorComponents:2};var v={},h=v;function b(e,t){var r=v[e];if(!r)throw"unknown internal format";var n=r.bytesPerElementMap[t];if(void 0===n)throw"unknown internal format";return n}function E(e){var t=v[e];if(!t)throw"unknown internal format";return{format:t.textureFormat,type:Array.isArray(t.type)?t.type[0]:t.type}}function _(e){return 0==(e&e-1)}function g(e,t,r){return f(t)?i.getGLTypeForTypedArray(t):r||e.UNSIGNED_BYTE}function x(e,t,r,n,o){if(o%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=o/n)%1)throw"can't guess dimensions"}else if((n=o/r)%1)throw"can't guess dimensions"}else{var i=Math.sqrt(o/(t===e.TEXTURE_CUBE_MAP?6:1));i%1==0?(r=i,n=i):(r=o,n=1)}return{width:r,height:n}}function T(e){c.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}h[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},h[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},h[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},h[d]={textureFormat:d,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},h[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},h[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:1,type:5121},h[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:1,type:5120},h[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},h[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:4,type:5126},h[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5121},h[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5120},h[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5123},h[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5122},h[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},h[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5124},h[33323]={textureFormat:m,colorRenderable:!0,textureFilterable:!0,bytesPerElement:2,type:5121},h[36757]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:2,type:5120},h[33327]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},h[33328]={textureFormat:m,colorRenderable:!1,textureFilterable:!1,bytesPerElement:8,type:5126},h[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5121},h[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5120},h[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5123},h[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5122},h[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5125},h[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5124},h[32849]={textureFormat:d,colorRenderable:!0,textureFilterable:!0,bytesPerElement:3,type:5121},h[35905]={textureFormat:d,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5121},h[36194]={textureFormat:d,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},h[36758]={textureFormat:d,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5120},h[35898]={textureFormat:d,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},h[35901]={textureFormat:d,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},h[34843]={textureFormat:d,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},h[34837]={textureFormat:d,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5126},h[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5121},h[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5120},h[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5123},h[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5122},h[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5125},h[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5124},h[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},h[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},h[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:4,type:5120},h[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},h[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},h[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:33640},h[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},h[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:16,type:5126},h[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5121},h[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5120},h[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:33640},h[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5123},h[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5122},h[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5124},h[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5125},h[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},h[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},h[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5126},h[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:34042},h[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:36269},Object.keys(h).forEach(function(e){var t=h[e];if(t.bytesPerElementMap={},Array.isArray(t.bytesPerElement))t.bytesPerElement.forEach(function(e,r){var n=t.type[r];t.bytesPerElementMap[n]=e});else{var r=t.type;t.bytesPerElementMap[r]=t.bytesPerElement}});var A={};function P(e,t){void 0!==t.colorspaceConversion&&(A.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(A.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(A.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function R(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,A.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,A.flipY)}function w(e){A.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),o.isWebGL2(e)&&(A.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),A.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),A.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),A.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),A.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function F(e){e.pixelStorei(e.UNPACK_ALIGNMENT,A.unpackAlignment),o.isWebGL2(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,A.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,A.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,A.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,A.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,A.unpackSkipImages))}function C(e,t,r,n){n.minMag&&(r.call(e,t,e.TEXTURE_MIN_FILTER,n.minMag),r.call(e,t,e.TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(e,t,e.TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(e,t,e.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(e,t,e.TEXTURE_WRAP_S,n.wrap),r.call(e,t,e.TEXTURE_WRAP_T,n.wrap),(t===e.TEXTURE_3D||a.isSampler(e,t))&&r.call(e,t,e.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(e,t,e.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(e,t,e.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(e,t,e.TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(e,t,e.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(e,t,e.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(e,t,e.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(e,t,e.TEXTURE_MAX_LEVEL,n.maxLevel)}function U(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t),C(e,n,e.texParameteri,r)}function M(e,t,r){C(e,t,e.samplerParameteri,r)}function B(e,t){var r=e.createSampler();return M(e,r,t),r}function O(e,t,r,n,i,a,u){r=r||c.textureOptions,a=a||e.RGBA,u=u||e.UNSIGNED_BYTE;var s=r.target||e.TEXTURE_2D;if(n=n||r.width,i=i||r.height,e.bindTexture(s,t),function(e,t,r,n){if(!o.isWebGL2(e))return _(t)&&_(r);var i=v[n];if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}(e,n,i,a))e.generateMipmap(s);else{var f=function(e){var t=v[e];if(!t)throw"unknown internal format";return t.textureFilterable}(a)?e.LINEAR:e.NEAREST;e.texParameteri(s,e.TEXTURE_MIN_FILTER,f),e.texParameteri(s,e.TEXTURE_MAG_FILTER,f),e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function I(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function S(e,t){return(t=t||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function z(e,t){var r=S(e,t).map(function(e,t){return{face:e,ndx:t}});return r.sort(function(e,t){return e.face-t.face}),r}function k(e,t,r,n){var o=(n=n||c.textureOptions).target||e.TEXTURE_2D,i=n.level||0,a=r.width,s=r.height,f=n.internalFormat||n.format||e.RGBA,d=E(f),m=n.format||d.format,p=n.type||d.type;if(P(e,n),e.bindTexture(o,t),o===e.TEXTURE_CUBE_MAP){var y,v,h=r.width,b=r.height;if(h/6===b)y=b,v=[0,0,1,0,2,0,3,0,4,0,5,0];else if(b/6===h)y=h,v=[0,0,0,1,0,2,0,3,0,4,0,5];else if(h/3==b/2)y=h/3,v=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(h/2!=b/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);y=h/2,v=[0,0,1,0,0,1,1,1,0,2,1,2]}l?(l.canvas.width=y,l.canvas.height=y,a=y,s=y,z(e,n).forEach(function(t){var n=v[2*t.ndx+0]*y,o=v[2*t.ndx+1]*y;l.drawImage(r,n,o,y,y,0,0,y,y),e.texImage2D(t.face,i,f,m,p,l.canvas)}),l.canvas.width=1,l.canvas.height=1):u.default.createImageBitmap&&(a=y,s=y,z(e,n).forEach(function(c){var l=v[2*c.ndx+0]*y,d=v[2*c.ndx+1]*y;e.texImage2D(c.face,i,f,y,y,0,m,p,null),u.default.createImageBitmap(r,l,d,y,y,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(r){P(e,n),e.bindTexture(o,t),e.texImage2D(c.face,i,f,m,p,r),R(e,n),I(n)&&O(e,t,n,a,s,f,p)})}))}else if(o===e.TEXTURE_3D||o===e.TEXTURE_2D_ARRAY){var _=Math.min(r.width,r.height),g=Math.max(r.width,r.height),x=g/_;if(x%1!=0)throw"can not compute 3D dimensions of element";var T=r.width===g?1:0,A=r.height===g?1:0;w(e),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.texImage3D(o,i,f,_,_,_,0,m,p,null);for(var C=0;C<x;++C){var M=C*_*T,B=C*_*A;e.pixelStorei(e.UNPACK_SKIP_PIXELS,M),e.pixelStorei(e.UNPACK_SKIP_ROWS,B),e.texSubImage3D(o,i,0,0,C,_,_,1,m,p,r)}F(e)}else e.texImage2D(o,i,f,m,p,r);R(e,n),I(n)&&O(e,t,n,a,s,f,p),U(e,t,n)}function D(){}function L(e){return u.default.ImageBitmap&&e instanceof u.default.ImageBitmap||u.default.ImageData&&e instanceof u.default.ImageData||u.default.HTMLElement&&e instanceof u.default.HTMLElement}function N(e,t,r){return L(e)?(setTimeout(function(){r(null,e)}),e):function(e,t,r){var n;if(r=r||D,u.default.Image){n=new u.default.Image,void 0!==(t=void 0!==t?t:c.crossOrigin)&&(n.crossOrigin=t);var o=function(){n.removeEventListener("error",i),n.removeEventListener("load",s),n=null},i=function(){var t="couldn't load image: "+e;a.error(t),r(t,n),o()},s=function(){r(null,n),o()};return n.addEventListener("error",i),n.addEventListener("load",s),n.src=e,n}if(u.default.ImageBitmap){var f,l,d=function(){r(f,l)},m={};t&&(m.mode="cors"),fetch(e,m).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return u.default.createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){l=e,setTimeout(d)}).catch(function(e){f=e,setTimeout(d)}),n=null}return n}(e,t,r)}function j(e,t,r){var n=(r=r||c.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(n,t),!1!==r.color){var o=function(e){return e=e||c.textureColor,f(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(n===e.TEXTURE_CUBE_MAP)for(var i=0;i<6;++i)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o)}}function X(e,t,r,n){return n=n||D,r=r||c.textureOptions,j(e,t,r),N((r=Object.assign({},r)).src,r.crossOrigin,function(o,i){o?n(o,t,i):(k(e,t,i,r),n(null,t,i))})}function G(e,t,r,n){n=n||D;var o=r.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";var i=r.level||0,a=r.internalFormat||r.format||e.RGBA,u=E(a),s=r.format||u.format,c=r.type||e.UNSIGNED_BYTE,f=r.target||e.TEXTURE_2D;if(f!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";j(e,t,r),r=Object.assign({},r);var l,d=6,m=[],p=S(e,r);l=o.map(function(o,u){return N(o,r.crossOrigin,(y=p[u],function(o,u){--d,o?m.push(o):u.width!==u.height?m.push("cubemap face img is not a square: "+u.src):(P(e,r),e.bindTexture(f,t),5===d?S(e).forEach(function(t){e.texImage2D(t,i,a,s,c,u)}):e.texImage2D(y,i,a,s,c,u),R(e,r),I(r)&&e.generateMipmap(f)),0===d&&n(m.length?m:void 0,t,l)}));var y})}function V(e,t,r,n){n=n||D;var o=r.src,i=r.internalFormat||r.format||e.RGBA,a=E(i),u=r.format||a.format,s=r.type||e.UNSIGNED_BYTE,c=r.target||e.TEXTURE_2D_ARRAY;if(c!==e.TEXTURE_3D&&c!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";j(e,t,r),r=Object.assign({},r);var f,d=o.length,m=[],p=r.level||0,y=r.width,v=r.height,h=o.length,b=!0;f=o.map(function(o,a){return N(o,r.crossOrigin,(E=a,function(o,a){if(--d,o)m.push(o);else{if(P(e,r),e.bindTexture(c,t),b){b=!1,y=r.width||a.width,v=r.height||a.height,e.texImage3D(c,p,i,y,v,h,0,u,s,null);for(var _=0;_<h;++_)e.texSubImage3D(c,p,0,0,_,y,v,1,u,s,a)}else{var g=a;a.width===y&&a.height===v||(g=l.canvas,l.canvas.width=y,l.canvas.height=v,l.drawImage(a,0,0,y,v)),e.texSubImage3D(c,p,0,0,E,y,v,1,u,s,g),g===l.canvas&&(l.canvas.width=0,l.canvas.height=0)}R(e,r),I(r)&&e.generateMipmap(c)}0===d&&n(m.length?m:void 0,t,f)}));var E})}function W(e,t,r,n){var a=(n=n||c.textureOptions).target||e.TEXTURE_2D;e.bindTexture(a,t);var u=n.width,s=n.height,l=n.depth,d=n.level||0,m=n.internalFormat||n.format||e.RGBA,p=E(m),y=n.format||p.format,v=n.type||g(e,r,p.type);if(f(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{var h=i.getTypedArrayTypeForGLType(v);r=new h(r)}var _,T=b(m,v),A=r.byteLength/T;if(A%1)throw"length wrong size for format: "+o.glEnumToString(e,y);if(a===e.TEXTURE_3D)if(u||s||l)!u||s&&l?!s||u&&l?(_=x(e,a,u,s,A/l),u=_.width,s=_.height):(_=x(e,a,u,l,A/s),u=_.width,l=_.height):(_=x(e,a,s,l,A/u),s=_.width,l=_.height);else{var C=Math.cbrt(A);if(C%1!=0)throw"can't guess cube size of array of numElements: "+A;u=C,s=C,l=C}else _=x(e,a,u,s,A),u=_.width,s=_.height;if(w(e),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment||1),P(e,n),a===e.TEXTURE_CUBE_MAP){var U=A/6*(T/r.BYTES_PER_ELEMENT);z(e,n).forEach(function(t){var n=U*t.ndx,o=r.subarray(n,n+U);e.texImage2D(t.face,d,m,u,s,0,y,v,o)})}else a===e.TEXTURE_3D?e.texImage3D(a,d,m,u,s,l,0,y,v,r):e.texImage2D(a,d,m,u,s,0,y,v,r);return R(e,n),F(e),{width:u,height:s,depth:l,type:v}}function Y(e,t,r){var n=r.target||e.TEXTURE_2D;e.bindTexture(n,t);var o=r.level||0,i=r.internalFormat||r.format||e.RGBA,a=E(i),u=r.format||a.format,s=r.type||a.type;if(P(e,r),n===e.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+c,o,i,r.width,r.height,0,u,s,null);else n===e.TEXTURE_3D?e.texImage3D(n,o,i,r.width,r.height,r.depth,0,u,s,null):e.texImage2D(n,o,i,r.width,r.height,0,u,s,null);R(e,r)}function K(e,t,r){r=r||D,t=t||c.textureOptions;var n=e.createTexture(),o=t.target||e.TEXTURE_2D,i=t.width||1,a=t.height||1,u=t.internalFormat||e.RGBA,s=E(u),l=t.type||s.type;e.bindTexture(o,n),o===e.TEXTURE_CUBE_MAP&&(e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var d=t.src;if(d)if("function"==typeof d&&(d=d(e,t)),"string"==typeof d)X(e,n,t,r);else if(f(d)||Array.isArray(d)&&("number"==typeof d[0]||Array.isArray(d[0])||f(d[0]))){var m=W(e,n,d,t);i=m.width,a=m.height,l=m.type}else if(Array.isArray(d)&&("string"==typeof d[0]||L(d[0])))o===e.TEXTURE_CUBE_MAP?G(e,n,t,r):V(e,n,t,r);else{if(!L(d))throw"unsupported src type";k(e,n,d,t),i=d.width,a=d.height}else Y(e,n,t);return I(t)&&O(e,n,t,i,a,u,l),U(e,n,t),n}},function(e,t,r){"use strict";t.__esModule=!0;var n={m4:!0,v3:!0,primitives:!0};t.primitives=t.v3=t.m4=void 0;var o=s(r(6));t.m4=o;var i=s(r(3));t.v3=i;var a=s(r(10));t.primitives=a;var u=r(11);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=u[e]))})},function(e,t,r){"use strict";t.__esModule=!0,t.create3DFVertices=w,t.createAugmentedTypedArray=d,t.createCubeVertices=A,t.createPlaneVertices=g,t.createSphereVertices=x,t.createTruncatedConeVertices=P,t.createXYQuadVertices=_,t.createCresentVertices=F,t.createCylinderVertices=C,t.createTorusVertices=U,t.createDiscVertices=M,t.deindexVertices=function(e){var t=e.indices,r={},n=t.length;return Object.keys(e).filter(m).forEach(function(o){for(var i=e[o],a=i.numComponents,u=d(a,n,i.constructor),s=0;s<n;++s)for(var c=t[s],f=c*a,l=0;l<a;++l)u.push(i[f+l]);r[o]=u}),r},t.flattenNormals=function(e){if(e.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var t=e.normal,r=t.length,n=0;n<r;n+=9){var o=t[n+0],i=t[n+1],a=t[n+2],u=t[n+3],s=t[n+4],c=t[n+5],f=t[n+6],l=t[n+7],d=t[n+8],m=o+u+f,p=i+s+l,y=a+c+d,v=Math.sqrt(m*m+p*p+y*y);m/=v,p/=v,y/=v,t[n+0]=m,t[n+1]=p,t[n+2]=y,t[n+3]=m,t[n+4]=p,t[n+5]=y,t[n+6]=m,t[n+7]=p,t[n+8]=y}return e},t.makeRandomVertexColors=function(e,t){t=t||{};var r=e.position.numElements,n=d(4,r,Uint8Array),o=t.rand||function(e,t){return t<3?(r=256,Math.random()*r|0):255;var r};if(e.color=n,e.indices)for(var i=0;i<r;++i)n.push(o(i,0),o(i,1),o(i,2),o(i,3));else for(var a=t.vertsPerColor||3,u=r/a,s=0;s<u;++s)for(var c=[o(s,0),o(s,1),o(s,2),o(s,3)],f=0;f<a;++f)n.push(c);return e},t.reorientDirections=v,t.reorientNormals=h,t.reorientPositions=b,t.reorientVertices=E,t.concatVertices=function(e){for(var t,r={},n=function(n){var o=e[n];Object.keys(o).forEach(function(e){r[e]||(r[e]=[]),t||"indices"===e||(t=e);var n=o[e],i=f(n,e),a=c(n),u=a.length/i;r[e].push(u)})},o=0;o<e.length;++o)n(o);var i=r[t],a={};return Object.keys(r).forEach(function(t){var r=function(t){for(var r,n=0,o=0;o<e.length;++o){var i=e[o],a=i[t],u=c(a);n+=u.length,r&&!a.data||(r=a)}return{length:n,spec:r}}(t),n=z(r.spec,r.length);!function(t,r,n){for(var o=0,i=0,a=0;a<e.length;++a){var u=e[a],s=u[t],f=c(s);"indices"===t?(S(f,n,i,o),o+=r[a]):S(f,n,i),i+=f.length}}(t,i,c(n)),a[t]=n}),a},t.duplicateVertices=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r],o=c(n),i=z(n,o.length);S(o,c(i),0),t[r]=i}),t},t.createDiscBuffers=t.createDiscBufferInfo=t.createTorusBuffers=t.createTorusBufferInfo=t.createCylinderBuffers=t.createCylinderBufferInfo=t.createCresentBuffers=t.createCresentBufferInfo=t.createXYQuadBuffers=t.createXYQuadBufferInfo=t.createTruncatedConeBuffers=t.createTruncatedConeBufferInfo=t.createSphereBuffers=t.createSphereBufferInfo=t.createPlaneBuffers=t.createPlaneBufferInfo=t.createCubeBuffers=t.createCubeBufferInfo=t.create3DFBuffers=t.create3DFBufferInfo=void 0;var n=s(r(7)),o=s(r(0)),i=s(r(1)),a=s(r(6)),u=s(r(3));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var c=n.getArray_,f=n.getNumComponents_;function l(e,t){var r=0;return e.push=function(){for(var t=0;t<arguments.length;++t){var n=arguments[t];if(n instanceof Array||i.isArrayBuffer(n))for(var o=0;o<n.length;++o)e[r++]=n[o];else e[r++]=n}},e.reset=function(e){r=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function d(e,t,r){return l(new(r||Float32Array)(e*t),e)}function m(e){return"indices"!==e}function p(e,t,r){for(var n=e.length,o=new Float32Array(3),i=0;i<n;i+=3)r(t,[e[i],e[i+1],e[i+2]],o),e[i]=o[0],e[i+1]=o[1],e[i+2]=o[2]}function y(e,t,r){r=r||u.create();var n=t[0],o=t[1],i=t[2];return r[0]=n*e[0]+o*e[1]+i*e[2],r[1]=n*e[4]+o*e[5]+i*e[6],r[2]=n*e[8]+o*e[9]+i*e[10],r}function v(e,t){return p(e,t,a.transformDirection),e}function h(e,t){return p(e,a.inverse(t),y),e}function b(e,t){return p(e,t,a.transformPoint),e}function E(e,t){return Object.keys(e).forEach(function(r){var n=e[r];r.indexOf("pos")>=0?b(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?v(n,t):r.indexOf("norm")>=0&&h(n,t)}),e}function _(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function g(e,t,r,n,o){e=e||1,t=t||1,r=r||1,n=n||1,o=o||a.identity();for(var i=(r+1)*(n+1),u=d(3,i),s=d(3,i),c=d(2,i),f=0;f<=n;f++)for(var l=0;l<=r;l++){var m=l/r,p=f/n;u.push(e*m-.5*e,0,t*p-.5*t),s.push(0,1,0),c.push(m,p)}for(var y=r+1,v=d(3,r*n*2,Uint16Array),h=0;h<n;h++)for(var b=0;b<r;b++)v.push((h+0)*y+b,(h+1)*y+b,(h+0)*y+b+1),v.push((h+1)*y+b,(h+1)*y+b+1,(h+0)*y+b+1);return E({position:u,normal:s,texcoord:c,indices:v},o)}function x(e,t,r,n,o,i,a){if(t<=0||r<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||Math.PI,i=i||0;for(var u=o-n,s=(a=a||2*Math.PI)-i,c=(t+1)*(r+1),f=d(3,c),l=d(3,c),m=d(2,c),p=0;p<=r;p++)for(var y=0;y<=t;y++){var v=y/t,h=p/r,b=s*v,E=u*h,_=Math.sin(b),g=Math.cos(b),x=Math.sin(E),T=g*x,A=Math.cos(E),P=_*x;f.push(e*T,e*A,e*P),l.push(T,A,P),m.push(1-v,h)}for(var R=t+1,w=d(3,t*r*2,Uint16Array),F=0;F<t;F++)for(var C=0;C<r;C++)w.push((C+0)*R+F,(C+0)*R+F+1,(C+1)*R+F),w.push((C+1)*R+F,(C+0)*R+F+1,(C+1)*R+F+1);return{position:f,normal:l,texcoord:m,indices:w}}var T=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function A(e){for(var t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=d(3,24),a=d(3,24),u=d(2,24),s=d(3,12,Uint16Array),c=0;c<6;++c){for(var f=T[c],l=0;l<4;++l){var m=r[f[l]],p=n[c],y=o[l];i.push(m),a.push(p),u.push(y)}var v=4*c;s.push(v+0,v+1,v+2),s.push(v+0,v+2,v+3)}return{position:i,normal:a,texcoord:u,indices:s}}function P(e,t,r,n,o,i,a){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(o<1)throw Error("verticalSubdivisions must be 1 or greater");for(var u=void 0===i||i,s=void 0===a||a,c=(u?2:0)+(s?2:0),f=(n+1)*(o+1+c),l=d(3,f),m=d(3,f),p=d(2,f),y=d(3,n*(o+c)*2,Uint16Array),v=n+1,h=Math.atan2(e-t,r),b=Math.cos(h),E=Math.sin(h),_=o+(s?2:0),g=u?-2:0;g<=_;++g){var x=g/o,T=r*x,A=void 0;g<0?(T=0,x=1,A=e):g>o?(T=r,x=1,A=t):A=e+g/o*(t-e),-2!==g&&g!==o+2||(A=0,x=0),T-=r/2;for(var P=0;P<v;++P){var R=Math.sin(P*Math.PI*2/n),w=Math.cos(P*Math.PI*2/n);l.push(R*A,T,w*A),m.push(g<0||g>o?0:R*b,g<0?-1:g>o?1:E,g<0||g>o?0:w*b),p.push(P/n,1-x)}}for(var F=0;F<o+c;++F)for(var C=0;C<n;++C)y.push(v*(F+0)+0+C,v*(F+0)+1+C,v*(F+1)+1+C),y.push(v*(F+0)+0+C,v*(F+1)+1+C,v*(F+1)+0+C);return{position:l,normal:m,texcoord:p,indices:y}}function R(e,t){t=t||[];for(var r=[],n=0;n<e.length;n+=4){var o=e[n],i=e.slice(n+1,n+4);i.push.apply(i,t);for(var a=0;a<o;++a)r.push.apply(r,i)}return r}function w(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=R([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=R([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,o={position:d(3,n),texcoord:d(2,n),normal:d(3,n),color:d(4,n,Uint8Array),indices:d(3,n/3,Uint16Array)};o.position.push(e),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(t),o.color.push(r);for(var i=0;i<n;++i)o.indices.push(i);return o}function F(e,t,r,n,o,i,a){if(o<=0)throw Error("subdivisionDown must be > 0");i=i||0;var s=2,c=(a=a||1)-i,f=2*(o+1)*(2+s),l=d(3,f),m=d(3,f),p=d(2,f);function y(e,t,r){return e+(t-e)*r}function v(t,r,a,f,d,v){for(var h=0;h<=o;h++){var b=r/(s-1),E=h/o,_=2*(b-.5),g=(i+E*c)*Math.PI,x=Math.sin(g),T=Math.cos(g),A=y(e,t,x),P=_*n,R=T*e,w=x*A;l.push(P,R,w);var F=u.add(u.multiply([0,x,T],a),f);m.push(F),p.push(b*d+v,E)}}for(var h=0;h<s;h++){var b=2*(h/(s-1)-.5);v(t,h,[1,1,1],[0,0,0],1,0),v(t,h,[0,0,0],[b,0,0],0,0),v(r,h,[1,1,1],[0,0,0],1,0),v(r,h,[0,0,0],[b,0,0],0,1)}var E=d(3,2*o*(2+s),Uint16Array);function _(e,t){for(var r=0;r<o;++r)E.push(e+r+0,e+r+1,t+r+0),E.push(e+r+1,t+r+1,t+r+0)}var g=o+1;return _(0*g,4*g),_(5*g,7*g),_(6*g,2*g),_(3*g,1*g),{position:l,normal:m,texcoord:p,indices:E}}function C(e,t,r,n,o,i){return P(e,e,t,r,n,o,i)}function U(e,t,r,n,o,i){if(r<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");o=o||0;for(var a=(i=i||2*Math.PI)-o,u=r+1,s=n+1,c=u*s,f=d(3,c),l=d(3,c),m=d(2,c),p=d(3,r*n*2,Uint16Array),y=0;y<s;++y)for(var v=y/n,h=v*Math.PI*2,b=Math.sin(h),E=e+b*t,_=Math.cos(h),g=_*t,x=0;x<u;++x){var T=x/r,A=o+T*a,P=Math.sin(A),R=Math.cos(A),w=P*E,F=R*E,C=P*b,U=R*b;f.push(w,g,F),l.push(C,_,U),m.push(T,1-v)}for(var M=0;M<n;++M)for(var B=0;B<r;++B){var O=1+B,I=1+M;p.push(u*M+B,u*I+B,u*M+O),p.push(u*I+B,u*I+O,u*M+O)}return{position:f,normal:l,texcoord:m,indices:p}}function M(e,t,r,n,o){if(t<3)throw Error("divisions must be at least 3");r=r||1,o=o||1,n=n||0;for(var i=(t+1)*(r+1),a=d(3,i),u=d(3,i),s=d(2,i),c=d(3,r*t*2,Uint16Array),f=0,l=e-n,m=t+1,p=0;p<=r;++p){for(var y=n+l*Math.pow(p/r,o),v=0;v<=t;++v){var h=2*Math.PI*v/t,b=y*Math.cos(h),E=y*Math.sin(h);if(a.push(b,0,E),u.push(0,1,0),s.push(1-v/t,p/r),p>0&&v!==t){var _=f+(v+1),g=f+v,x=f+v-m,T=f+(v+1)-m;c.push(_,g,x),c.push(_,x,T)}}f+=t+1}return{position:a,normal:u,texcoord:s,indices:c}}function B(e){return function(t){var r=e.apply(this,Array.prototype.slice.call(arguments,1));return n.createBuffersFromArrays(t,r)}}function O(e){return function(t){var r=e.apply(null,Array.prototype.slice.call(arguments,1));return n.createBufferInfoFromArrays(t,r)}}var I=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function S(e,t,r,n){n=n||0;for(var o=e.length,i=0;i<o;++i)t[r+i]=e[i]+n}function z(e,t){var r=c(e),n=new r.constructor(t),i=n;return r.numComponents&&r.numElements&&l(n,r.numComponents),e.data&&(i={data:n},o.copyNamedProperties(I,e,i)),i}var k=O(w);t.create3DFBufferInfo=k;var D=B(w);t.create3DFBuffers=D;var L=O(A);t.createCubeBufferInfo=L;var N=B(A);t.createCubeBuffers=N;var j=O(g);t.createPlaneBufferInfo=j;var X=B(g);t.createPlaneBuffers=X;var G=O(x);t.createSphereBufferInfo=G;var V=B(x);t.createSphereBuffers=V;var W=O(P);t.createTruncatedConeBufferInfo=W;var Y=B(P);t.createTruncatedConeBuffers=Y;var K=O(_);t.createXYQuadBufferInfo=K;var H=B(_);t.createXYQuadBuffers=H;var q=O(F);t.createCresentBufferInfo=q;var Z=B(F);t.createCresentBuffers=Z;var Q=O(C);t.createCylinderBufferInfo=Q;var $=B(C);t.createCylinderBuffers=$;var J=O(U);t.createTorusBufferInfo=J;var ee=B(U);t.createTorusBuffers=ee;var te=O(M);t.createDiscBufferInfo=te;var re=B(M);t.createDiscBuffers=re},function(e,t,r){"use strict";t.__esModule=!0;var n={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};t.addExtensionsToContext=b,t.getContext=function(e,t){return function(e,t){for(var r=["webgl2","webgl","experimental-webgl"],n=null,o=0;o<r.length;++o)if(n=e.getContext(r[o],t)){p.addExtensionsToContext&&b(n);break}return n}(e,t)},t.getWebGLContext=function(e,t){return function(e,t){for(var r=["webgl","experimental-webgl"],n=null,o=0;o<r.length;++o)if(n=e.getContext(r[o],t)){p.addExtensionsToContext&&b(n);break}return n}(e,t)},t.resizeCanvasToDisplaySize=function(e,t){t=t||1,t=Math.max(0,t);var r=e.clientWidth*t|0,n=e.clientHeight*t|0;if(e.width!==r||e.height!==n)return e.width=r,e.height=n,!0;return!1},t.setDefaults=function(e){a.copyExistingProperties(e,p),o.setAttributeDefaults_(e),i.setTextureDefaults_(e)};var o=m(r(7));Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=o[e]))});var i=m(r(8));Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=i[e]))});var a=m(r(0)),u=m(r(4));Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=u[e]))});var s=r(12);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=s[e]))});var c=r(13);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=c[e]))});var f=r(5);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=f[e]))});var l=r(1);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=l[e]))});var d=r(14);function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||(t[e]=d[e]))});var p={addExtensionsToContext:!0};var y=/^(.*?)_/;function v(e,t){u.glEnumToString(e,0);var r=e.getExtension(t);if(r){var n={},o=y.exec(t)[1],i="_"+o;for(var s in r){var c=r[s],f="function"==typeof c,l=f?o:i,d=s;s.endsWith(l)&&(d=s.substring(0,s.length-l.length)),void 0!==e[d]?f||e[d]===c||a.warn(d,e[d],c,s):f?e[d]=function(e){return function(){return e.apply(r,arguments)}}(c):(e[d]=c,n[d]=c)}n.constructor={name:r.constructor.name},u.glEnumToString(n,0)}return r}var h=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function b(e){for(var t=0;t<h.length;++t)v(e,h[t])}},function(e,t,r){"use strict";t.__esModule=!0,t.drawBufferInfo=o,t.drawObjectList=function(e,t){var r=null,i=null;t.forEach(function(t){if(!1!==t.active){var a=t.programInfo,u=t.vertexArrayInfo||t.bufferInfo,s=!1,c=void 0===t.type?e.TRIANGLES:t.type;a!==r&&(r=a,e.useProgram(a.program),s=!0),(s||u!==i)&&(i&&i.vertexArrayObject&&!u.vertexArrayObject&&e.bindVertexArray(null),i=u,n.setBuffersAndAttributes(e,a,u)),n.setUniforms(a,t.uniforms),o(e,u,c,t.count,t.offset,t.instanceCount)}}),i.vertexArrayObject&&e.bindVertexArray(null)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(5));function o(e,t,r,n,o,i){r=void 0===r?e.TRIANGLES:r;var a=t.indices,u=t.elementType,s=void 0===n?t.numElements:n;o=void 0===o?0:o,u||a?void 0!==i?e.drawElementsInstanced(r,s,void 0===u?e.UNSIGNED_SHORT:t.elementType,o,i):e.drawElements(r,s,void 0===u?e.UNSIGNED_SHORT:t.elementType,o):void 0!==i?e.drawArraysInstanced(r,o,s,i):e.drawArrays(r,o,s)}},function(e,t,r){"use strict";t.__esModule=!0,t.bindFramebufferInfo=function(e,t,r){r=r||e.FRAMEBUFFER,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},t.createFramebufferInfo=function(e,t,r,i){var f=e.FRAMEBUFFER,l=e.createFramebuffer();e.bindFramebuffer(f,l),r=r||e.drawingBufferWidth,i=i||e.drawingBufferHeight;var d=0,m={framebuffer:l,attachments:[],width:r,height:i};return(t=t||u).forEach(function(t){var u=t.attachment,l=t.format,p=function(e){return s[e]}(l);if(p||(p=a+d++),!u)if(function(e){return c[e]}(l))u=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,l,r,i);else{var y=Object.assign({},t);y.width=r,y.height=i,void 0===y.auto&&(y.auto=!1,y.min=y.min||y.minMag||e.LINEAR,y.mag=y.mag||y.minMag||e.LINEAR,y.wrapS=y.wrapS||y.wrap||e.CLAMP_TO_EDGE,y.wrapT=y.wrapT||y.wrap||e.CLAMP_TO_EDGE),u=n.createTexture(e,y)}if(o.isRenderbuffer(e,u))e.framebufferRenderbuffer(f,p,e.RENDERBUFFER,u);else{if(!o.isTexture(e,u))throw"unknown attachment type";e.framebufferTexture2D(f,p,t.texTarget||e.TEXTURE_2D,u,t.level||0)}m.attachments.push(u)}),m},t.resizeFramebufferInfo=function(e,t,r,i,a){i=i||e.drawingBufferWidth,a=a||e.drawingBufferHeight,t.width=i,t.height=a,(r=r||u).forEach(function(r,u){var s=t.attachments[u],c=r.format;if(o.isRenderbuffer(e,s))e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,c,i,a);else{if(!o.isTexture(e,s))throw"unknown attachment type";n.resizeTexture(e,s,r,i,a)}})};var n=i(r(8)),o=i(r(0));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}var a=36064,u=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],s={};s[34041]=33306,s[6401]=36128,s[36168]=36128,s[6402]=36096,s[33189]=36096;var c={};c[32854]=!0,c[32855]=!0,c[36194]=!0,c[34041]=!0,c[33189]=!0,c[6401]=!0,c[36168]=!0},function(e,t,r){"use strict";t.__esModule=!0,t.createVertexArrayInfo=function(e,t,r){var o=e.createVertexArray();e.bindVertexArray(o),t.length||(t=[t]);return t.forEach(function(t){n.setBuffersAndAttributes(e,t,r)}),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:o}},t.createVAOAndSetAttributes=o,t.createVAOFromBufferInfo=function(e,t,r){return o(e,t.attribSetters||t,r.attribs,r.indices)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(5));function o(e,t,r,o){var i=e.createVertexArray();return e.bindVertexArray(i),n.setAttributes(t,r),o&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o),e.bindVertexArray(null),i}}])},e.exports=n()},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(a,u)}s((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=r(1),i=r(5);t.App=class{constructor(){this.gameMode=new i.GameMode1p,this.lastRenderTime=0}startGame(){return n(this,void 0,void 0,function*(){o.init();const e=()=>new Promise(e=>{(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(e=>{window.setTimeout(e,1e3/60,(new Date).getTime())}))(e)});for(;;){const t=yield e(),r=Math.min(t-this.lastRenderTime,100);this.lastRenderTime=t;const n=this.gameMode.frameCoroutine.next(r).done;this.gameMode.draw(),n&&(this.gameMode=new i.GameMode1p)}})}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(a,u)}s((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=new(r(9).App);(()=>n(this,void 0,void 0,function*(){yield o.startGame()}))()}]);